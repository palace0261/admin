<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>

  <section>
    <div class="zqveuo" style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;"></div>
      <iframe src="https://www.youtube.com/embed/ldt29SgHvHg?si=OrwvM_JkSwGSEFK_" title="YouTube video player" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0;" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
    </div>
  </section>

  <script>
    (function(){
      const container = document.querySelector('.zqveuo');
      if (!container) return;

      function findIframe() {
        return container.querySelector('iframe')
          || container.nextElementSibling?.tagName === 'IFRAME' && container.nextElementSibling
          || container.parentElement?.querySelector('iframe[src*="youtube.com"]')
          || document.querySelector('iframe[src*="youtube.com"]');
      }

      const iframe = findIframe();
      if (!iframe) return;

      // normalize URLs and build play / pause variants
      function buildUrls(src) {
        try {
          const base = new URL(src, location.href);
          const play = new URL(base);
          play.searchParams.set('autoplay', '1');
          play.searchParams.set('mute', '1');            // browsers allow autoplay if muted
          play.searchParams.set('controls', '0');        // hide controls when autoplaying
          play.searchParams.set('enablejsapi', '1');
          play.searchParams.set('playsinline', '1');
          play.searchParams.set('rel', '0');
          play.searchParams.set('modestbranding', '1');

          const pause = new URL(base);
          pause.searchParams.set('autoplay', '0');
          pause.searchParams.set('controls', '1');       // show controls when paused/out of view
          pause.searchParams.set('enablejsapi', '1');
          return { play: play.toString(), pause: pause.toString() };
        } catch (e) {
          return { play: src, pause: src };
        }
      }

      const src = iframe.getAttribute('src') || '';
      const { play, pause } = buildUrls(src);

      // Use IntersectionObserver to trigger on scroll/visibility
      const io = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting && entry.intersectionRatio >= 0.5) {
            if (iframe.src !== play) iframe.src = play;
          } else {
            if (iframe.src !== pause) iframe.src = pause;
          }
        });
      }, { threshold: [0, 0.5, 1] });

      io.observe(container);

      // Fallback: also check on scroll (helps older browsers/environments)
      let ticking = false;
      function checkVisibility() {
        const rect = container.getBoundingClientRect();
        const visible = rect.top < window.innerHeight && rect.bottom > 0 && (Math.min(rect.bottom, window.innerHeight) - Math.max(rect.top, 0)) / rect.height >= 0.5;
        if (visible) {
          if (iframe.src !== play) iframe.src = play;
        } else {
          if (iframe.src !== pause) iframe.src = pause;
        }
        ticking = false;
      }
      window.addEventListener('scroll', () => {
        if (!ticking) {
          ticking = true;
          requestAnimationFrame(checkVisibility);
        }
      }, { passive: true });

      // initial check
      checkVisibility();
    })();
  </script>


</body>
</html>